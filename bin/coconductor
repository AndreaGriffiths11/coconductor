#!/usr/bin/env ruby

require_relative '../lib/coconductor'
require 'thor'

class CoconductorCLI < Thor
  package_name 'Coconductor'
  default_task :detect

  private

  def path
    args.first || Dir.pwd
  end

  def project
    @project ||= Coconductor.project(path)
  end

  def code_of_conduct
    project.code_of_conduct
  end

  def code_of_conduct_file
    project.code_of_conduct_file
  end
end

commands_dir = File.expand_path '../lib/coconductor/commands/', __dir__
Dir["#{commands_dir}/*.rb"].each { |c| require(c) }

CoconductorCLI.start(ARGV)
